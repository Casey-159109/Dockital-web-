{"ast":null,"code":"var _jsxFileName = \"/Users/ujjwalsrivastava/Downloads/final-2/client/src/components/Modal.js\",\n  _s = $RefreshSig$();\nimport React, { useRef, useState, useMemo } from 'react';\nimport Components from \".\";\nimport { uploadFileToIPFS } from \"../lib/ipfs\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst {\n  Preview,\n  Form\n} = Components;\nconst {\n  mintNFT,\n  listNFT\n} = require(\"../lib/ethers\").init(window.ethereum);\nconst Modal = () => {\n  _s();\n  const inputRef = useRef();\n  const [isPending, loading] = useState(false);\n  const [message, setMessage] = useState(\"Minting Token ....\");\n  const [value, setValue] = useState({\n    name: null,\n    file: null,\n    path: null,\n    price: 0\n  });\n  const onTxConfirmed = () => {\n    loading(false);\n    alert(\"new token successfully minted \");\n    inputRef.current.value = \"\";\n    setValue({\n      name: null,\n      file: null,\n      path: null,\n      price: 0\n    });\n  };\n  const handleOnSubmit = async e => {\n    e.preventDefault();\n    if (value.name && value.file && value.price) {\n      //upload to IPFS\n      uploadFileToIPFS(value, async res => {\n        loading(true);\n        const tokenURI = `https://gateway.pinata.cloud/ipfs/${res.data.IpfsHash}`;\n        const {\n          tokenId\n        } = await mintNFT(tokenURI);\n        setMessage(\"creating Token ...\");\n        // console.log(value.price);\n        await listNFT(tokenId, value.name, tokenURI, parseInt(value.price));\n        onTxConfirmed();\n      });\n    }\n  };\n  const handleOnChange = e => {\n    if (e.target.name === 'file') {\n      return setValue({\n        ...value,\n        file: e.target.files[0],\n        path: URL.createObjectURL(e.target.files[0])\n      });\n    }\n    setValue({\n      ...value,\n      [e.target.name]: e.target.value\n    });\n  };\n  const isDisabled = useMemo(() => {\n    return !value.file || !value.name || !value.price;\n  }, [value]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"modal\",\n    tabindex: \"-1\",\n    id: \"modal\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal-dialog\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-content\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-header\",\n          children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n            className: \"modal-title\",\n            children: \"Create Token\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 52,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"btn-close\",\n            \"data-bs-dismiss\": \"modal\",\n            \"aria-label\": \"Close\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 53,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-body d-flex\",\n          children: [/*#__PURE__*/_jsxDEV(Preview, {\n            ...value\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 56,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(Form, {\n            ref: inputRef,\n            onChange: handleOnChange,\n            onSubmit: handleOnSubmit,\n            isDisabled: isDisabled,\n            message: message,\n            isPending: isPending\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 57,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 7\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 5\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 48,\n    columnNumber: 3\n  }, this);\n};\n_s(Modal, \"evjFyNYsIVyH8c7F435fwaqzO40=\");\n_c = Modal;\nexport default Modal;\nvar _c;\n$RefreshReg$(_c, \"Modal\");","map":{"version":3,"names":["React","useRef","useState","useMemo","Components","uploadFileToIPFS","jsxDEV","_jsxDEV","Preview","Form","mintNFT","listNFT","require","init","window","ethereum","Modal","_s","inputRef","isPending","loading","message","setMessage","value","setValue","name","file","path","price","onTxConfirmed","alert","current","handleOnSubmit","e","preventDefault","res","tokenURI","data","IpfsHash","tokenId","parseInt","handleOnChange","target","files","URL","createObjectURL","isDisabled","className","tabindex","id","children","fileName","_jsxFileName","lineNumber","columnNumber","type","ref","onChange","onSubmit","_c","$RefreshReg$"],"sources":["/Users/ujjwalsrivastava/Downloads/final-2/client/src/components/Modal.js"],"sourcesContent":["import React, { useRef, useState, useMemo  } from 'react';\nimport Components from \".\"\nimport { uploadFileToIPFS } from \"../lib/ipfs\"\nconst { Preview, Form } = Components;\n\nconst { mintNFT, listNFT } = require(\"../lib/ethers\").init(window.ethereum);\n\nconst Modal = () => {\n  const inputRef = useRef()\n  const [isPending, loading] = useState(false)\n  const [message, setMessage] = useState(\"Minting Token ....\")\n  const [value, setValue] = useState({ name: null, file: null, path: null, price: 0})\n  \n  const onTxConfirmed = () => {\n    loading(false)\n    alert(\"new token successfully minted \");\n    inputRef.current.value = \"\";\n    setValue({ name: null , file: null, path: null, price: 0})\n  }\n  const handleOnSubmit = async (e) => {\n      e.preventDefault();\n      if(value.name && value.file && value.price) {\n\n        //upload to IPFS\n        uploadFileToIPFS(value, async res => {\n          loading(true)\n          const tokenURI = `https://gateway.pinata.cloud/ipfs/${res.data.IpfsHash}`;\n          const { tokenId } = await mintNFT(tokenURI);\n          setMessage(\"creating Token ...\")\n          // console.log(value.price);\n          await listNFT(tokenId, value.name, tokenURI, parseInt(value.price));\n          onTxConfirmed()\n        })\n      }\n  }\n  const handleOnChange = e => {\n    if (e.target.name === 'file') {\n      return setValue({...value, file: e.target.files[0], path: URL.createObjectURL(e.target.files[0])})\n    }\n    setValue({...value, [e.target.name]: e.target.value})\n  }\n\n  const isDisabled = useMemo(() => {\n    return !value.file || !value.name || !value.price\n  }, [value])\n\n  return(\n  <div className=\"modal\" tabindex=\"-1\" id=\"modal\">\n    <div className=\"modal-dialog\">\n      <div className=\"modal-content\">\n        <div className=\"modal-header\">\n          <h5 className=\"modal-title\">Create Token</h5>\n          <button type=\"button\" className=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\n        </div>\n        <div className=\"modal-body d-flex\">\n          <Preview {...value} />\n          <Form \n            ref={inputRef} \n            onChange={handleOnChange} \n            onSubmit={handleOnSubmit} \n            isDisabled={isDisabled} \n            message={message}\n            isPending={isPending}\n            />\n        </div>\n      </div>\n    </div>\n</div>)\n}\nexport default Modal;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}